<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SereneMind - Your Path to Mental Wellness</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .hero-bg {
            background-color: #F0F9FF; /* A very light, calming blue */
        }
        .cta-bg {
            background-color: #3B82F6; /* A friendly, encouraging blue */
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in-element {
            animation: fadeIn 0.7s ease-out forwards;
            opacity: 0;
        }

        /* --- Integrated Chatbot Styles --- */
        #chat-container {
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            transform: translateY(10px) scale(0.95);
            opacity: 0;
            pointer-events: none;
        }
        #chat-container.active {
            opacity: 1;
            pointer-events: auto;
            transform: translateY(0) scale(1);
        }
        #chat-log {
            scrollbar-width: thin;
            scrollbar-color: #9ca3af #f3f4f6;
        }
        #chat-log::-webkit-scrollbar { width: 8px; }
        #chat-log::-webkit-scrollbar-track { background: #f3f4f6; }
        #chat-log::-webkit-scrollbar-thumb {
            background-color: #9ca3af;
            border-radius: 10px;
            border: 3px solid #f3f4f6;
        }
        .user-message > div { background-color: #3B82F6; color: white; }
        .bot-message > div { background-color: #ffffff; color: #1f2937; border: 1px solid #e5e7eb; }
        .loading-dots span {
            animation: dot-pulse 1.4s infinite;
            animation-fill-mode: both;
        }
        .loading-dots span:nth-child(2) { animation-delay: 0.2s; }
        .loading-dots span:nth-child(3) { animation-delay: 0.4s; }
        @keyframes dot-pulse {
            0% { opacity: 0.2; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
            100% { opacity: 0.2; transform: scale(1); }
        }

        /* --- Counsellor Request Modal Styles --- */
        #request-modal {
            transition: opacity 0.3s ease-in-out;
        }
        #request-modal .modal-content {
             transition: transform 0.3s ease-in-out;
             transform: translateY(-20px) scale(0.95);
        }
        #request-modal.flex .modal-content {
            transform: translateY(0) scale(1);
        }
    </style>
</head>
<body class="bg-white text-gray-700">

    <!-- Header -->
    <header id="header" class="bg-white shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-blue-600">SereneMind</a>
            <div class="hidden md:flex space-x-8 items-center">
                <a href="#services" class="text-gray-600 hover:text-blue-600 transition duration-300">Services</a>
                <a href="#about" class="text-gray-600 hover:text-blue-600 transition duration-300">About Us</a>
                <a href="#resources" class="text-gray-600 hover:text-blue-600 transition duration-300">Resources</a>
                <button id="get-started-btn-header" class="bg-blue-500 text-white px-4 py-2 rounded-full hover:bg-blue-600 transition duration-300">Get Started</button>
            </div>
            <!-- Mobile Menu Button -->
            <button id="mobile-menu-button" class="md:hidden text-gray-600 focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pt-2 pb-4">
            <a href="#services" class="block text-gray-600 hover:text-blue-600 py-2">Services</a>
            <a href="#about" class="block text-gray-600 hover:text-blue-600 py-2">About Us</a>
            <a href="#resources" class="block text-gray-600 hover:text-blue-600 py-2">Resources</a>
            <button id="get-started-btn-mobile" class="block w-full text-center bg-blue-500 text-white mt-2 px-4 py-2 rounded-full hover:bg-blue-600">Get Started</button>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="hero-bg pt-20 pb-24">
            <div class="container mx-auto px-6 text-center">
                <h1 class="text-4xl md:text-6xl font-bold text-gray-800 mb-4 leading-tight">Your Safe Space for Mental Wellness</h1>
                <p class="text-lg md:text-xl text-gray-600 mb-8 max-w-3xl mx-auto">Find support, guidance, and community on your journey to a healthier mind. You are not alone.</p>
                <a href="#services" class="bg-blue-600 text-white px-8 py-4 rounded-full text-lg font-semibold hover:bg-blue-700 transition duration-300 transform hover:scale-105">Explore Our Services</a>
            </div>
        </section>

        <!-- Services Section -->
        <section id="services" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-gray-800">How We Can Help</h2>
                    <p class="text-gray-600 mt-2 max-w-2xl mx-auto">We offer a range of services designed to meet you where you are.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Service Card 1 -->
                    <div class="bg-gray-50 p-8 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 text-center animate-on-scroll">
                        <div class="bg-blue-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-6">
                           <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03 8-9 8s9 3.582 9 8z"></path></svg>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-800 mb-3">Online Counseling</h3>
                        <p class="text-gray-600">Connect with licensed therapists through secure video calls, messaging, and phone calls.</p>
                    </div>
                    <!-- Service Card 2 -->
                    <div class="bg-gray-50 p-8 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 text-center animate-on-scroll">
                        <div class="bg-green-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-6">
                             <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-800 mb-3">Guided Resources</h3>
                        <p class="text-gray-600">Access a library of articles, meditations, and tools to support your mental health journey.</p>
                    </div>
                    <!-- Service Card 3 -->
                    <div class="bg-gray-50 p-8 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 text-center animate-on-scroll">
                         <div class="bg-purple-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-6">
                            <svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                        </div>
                        <h3 class="text-xl font-semibold text-gray-800 mb-3">Community Support</h3>
                        <p class="text-gray-600">Join anonymous peer support groups and forums to share experiences and feel connected.</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- About Us Section -->
        <section id="about" class="py-20 bg-gray-50">
            <div class="container mx-auto px-6 flex flex-col md:flex-row items-center gap-12">
                <div class="md:w-1/2 animate-on-scroll">
                    <img src="https://placehold.co/600x400/E0F2FE/3B82F6?text=Our+Team" alt="A diverse group of smiling people" class="rounded-lg shadow-lg w-full">
                </div>
                <div class="md:w-1/2 animate-on-scroll">
                    <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">Our Mission: Compassionate Care for All</h2>
                    <p class="text-gray-600 mb-4 leading-relaxed">SereneMind was founded with the belief that everyone deserves access to quality mental health care. We're dedicated to creating a safe, confidential, and inclusive platform that empowers individuals to take control of their mental well-being.</p>
                    <p class="text-gray-600 leading-relaxed">Our team of licensed professionals is committed to providing personalized support with empathy and respect. We're here to listen, guide, and support you every step of the way.</p>
                </div>
            </div>
        </section>

        <!-- Resources Section -->
        <section id="resources" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-gray-800">Explore Our Resources</h2>
                    <p class="text-gray-600 mt-2">Knowledge and tools to help you on your path.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Resource Card 1 -->
                    <div class="border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-lg transition-shadow duration-300 animate-on-scroll">
                        <img src="https://placehold.co/400x250/EBF4FF/3B82F6?text=Mindfulness" alt="Article Thumbnail" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <span class="text-sm text-blue-500 font-semibold">Article</span>
                            <h3 class="text-xl font-semibold text-gray-800 my-2">The Power of Mindfulness in Daily Life</h3>
                            <p class="text-gray-600 text-sm mb-4">Learn simple techniques to stay present and reduce anxiety.</p>
                            <a href="#" class="text-blue-600 font-semibold hover:underline">Read More &rarr;</a>
                        </div>
                    </div>
                     <!-- Resource Card 2 -->
                    <div class="border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-lg transition-shadow duration-300 animate-on-scroll">
                        <img src="https://placehold.co/400x250/EBF4FF/3B82F6?text=Anxiety" alt="Article Thumbnail" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <span class="text-sm text-blue-500 font-semibold">Guide</span>
                            <h3 class="text-xl font-semibold text-gray-800 my-2">Coping Strategies for Anxiety</h3>
                            <p class="text-gray-600 text-sm mb-4">Practical steps you can take when you feel overwhelmed.</p>
                            <a href="#" class="text-blue-600 font-semibold hover:underline">Read More &rarr;</a>
                        </div>
                    </div>
                     <!-- Resource Card 3 -->
                    <div class="border border-gray-200 rounded-lg overflow-hidden shadow-sm hover:shadow-lg transition-shadow duration-300 animate-on-scroll">
                        <img src="https://placehold.co/400x250/EBF4FF/3B82F6?text=Self-Care" alt="Article Thumbnail" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <span class="text-sm text-blue-500 font-semibold">Video</span>
                            <h3 class="text-xl font-semibold text-gray-800 my-2">Building a Sustainable Self-Care Routine</h3>
                            <p class="text-gray-600 text-sm mb-4">Discover how to prioritize your well-being effectively.</p>
                            <a href="#" class="text-blue-600 font-semibold hover:underline">Watch Now &rarr;</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section class="py-20 bg-gray-50">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-gray-800">What Our Community Says</h2>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="bg-white p-8 rounded-lg shadow-md animate-on-scroll">
                        <p class="text-gray-600 italic mb-4">"I felt heard for the first time in a long time. My therapist is incredibly understanding and has given me practical tools to manage my anxiety."</p>
                        <p class="font-semibold text-gray-800">- Sarah J.</p>
                    </div>
                    <div class="bg-white p-8 rounded-lg shadow-md animate-on-scroll">
                        <p class="text-gray-600 italic mb-4">"The community forums are a game-changer. Knowing I'm not alone in my struggles has been incredibly comforting and empowering."</p>
                        <p class="font-semibold text-gray-800">- Michael B.</p>
                    </div>
                    <div class="bg-white p-8 rounded-lg shadow-md animate-on-scroll">
                        <p class="text-gray-600 italic mb-4">"SereneMind made getting help so accessible. I can schedule sessions around my busy life, which made all the difference."</p>
                        <p class="font-semibold text-gray-800">- Emily R.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Call to Action Section -->
        <section id="contact" class="cta-bg text-white">
            <div class="container mx-auto px-6 py-20 text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">Ready to Take the First Step?</h2>
                <p class="text-lg mb-8 max-w-2xl mx-auto">Your journey to better mental health starts here. Reach out today to connect with a professional who can help.</p>
                <button id="find-therapist-btn" class="bg-white text-blue-600 px-8 py-4 rounded-full text-lg font-semibold hover:bg-gray-100 transition duration-300 transform hover:scale-105">Find a Therapist</button>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white">
        <div class="container mx-auto px-6 py-12">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">SereneMind</h3>
                    <p class="text-gray-400">Your partner in mental wellness.</p>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Quick Links</h4>
                    <ul>
                        <li class="mb-2"><a href="#services" class="hover:text-blue-400">Services</a></li>
                        <li class="mb-2"><a href="#about" class="hover:text-blue-400">About Us</a></li>
                        <li class="mb-2"><a href="#resources" class="hover:text-blue-400">Resources</a></li>
                        <li class="mb-2"><a href="#" class="hover:text-blue-400">FAQ</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Legal</h4>
                    <ul>
                        <li class="mb-2"><a href="#" class="hover:text-blue-400">Privacy Policy</a></li>
                        <li class="mb-2"><a href="#" class="hover:text-blue-400">Terms of Service</a></li>
                    </ul>
                </div>
                 <div>
                    <h4 class="font-semibold mb-4">Connect With Us</h4>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd" /></svg></a>
                        <a href="#" class="text-gray-400 hover:text-white"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.024.06 1.378.06 3.808s-.012 2.784-.06 3.808c-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.024.048-1.378.06-3.808.06s-2.784-.012-3.808-.06c-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.048-1.024-.06-1.378-.06-3.808s.012-2.784.06-3.808c.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.06-1.004.048-1.625.211-2.126.41-1.054.423-1.838 1.207-2.262 2.262-.2.501-.362 1.122-.41 2.126-.048 1.023-.06 1.351-.06 3.807 0 2.456.011 2.784.06 3.807.048 1.004.211 1.625.41 2.126.423 1.054 1.207 1.838 2.262 2.262.501.2.921.362 2.126.41 1.023.048 1.351.06 3.807.06h.468c2.456 0 2.784-.011 3.807-.06 1.004-.048 1.625-.211 2.126-.41 1.054-.423 1.838-1.207 2.262-2.262.2-.501.362-1.122.41-2.126.048-1.023.06-1.351.06-3.807s-.011-2.784-.06-3.807c-.048-1.004-.211-1.625-.41-2.126-.423-1.054-1.207-1.838-2.262-2.262-.501-.2-.921.362-2.126-.41-1.023-.048-1.351-.06-3.807-.06zm-4.493 7.828a5.25 5.25 0 1110.5 0 5.25 5.25 0 01-10.5 0zM12 15.25a3.25 3.25 0 100-6.5 3.25 3.25 0 000 6.5zm6.313-6.712a1.25 1.25 0 10-2.5 0 1.25 1.25 0 002.5 0z" clip-rule="evenodd" /></svg></a>
                        <a href="#" class="text-gray-400 hover:text-white"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.71v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84" /></svg></a>
                    </div>
                </div>
            </div>
            <div class="mt-8 border-t border-gray-700 pt-6 text-center text-gray-400 text-sm">
                <p>&copy; 2024 SereneMind. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- --- Integrated Chatbot HTML --- -->
    <div id="chatbot-root" class="fixed bottom-6 right-6 z-[100]">
        <!-- Chat Window -->
        <div id="chat-container" class="w-full max-w-sm h-[60vh] md:max-w-md md:h-[70vh] flex flex-col rounded-xl shadow-2xl origin-bottom-right mb-4 bg-white">
             <!-- Chat Header -->
            <div class="flex items-center justify-between p-4 border-b border-gray-200 rounded-t-xl bg-gray-50 flex-shrink-0">
                <div class="flex items-center space-x-3">
                     <div class="relative flex items-center justify-center w-12 h-12 bg-blue-500 rounded-full text-white">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-7 h-7" viewBox="0 0 24 24" fill="currentColor"><path d="M16.886 14.114c.257.439.123 1.01-.316 1.267-.439.257-1.01.123-1.267-.316a1 1 0 0 1-.001-.001c-.482-.821-1.35-1.32-2.29-1.32s-1.808.499-2.29 1.32a.75.75 0 1 1-1.268-.633c.96-1.636 2.64-2.688 4.558-2.688s3.597 1.052 4.558 2.688l.001.001c.256.439.122 1.01-.317 1.267-.439.257-1.01.123-1.267-.316-.482-.821-1.35-1.32-2.29-1.32s-1.808.499-2.29 1.32a.75.75 0 1 1-1.268-.633c.96-1.636 2.64-2.688 4.558-2.688s3.597 1.052 4.558 2.688zM12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zM8.5 8.5a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0zm5.5 1.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/></svg>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gray-800">SereneMind AI</h1>
                        <p class="text-sm text-green-500 flex items-center"><span class="w-2 h-2 bg-green-500 rounded-full mr-1.5"></span>Online</p>
                    </div>
                </div>
                <button id="close-chat-button" class="text-gray-400 hover:text-gray-600">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
             <!-- Chat Log -->
            <div id="chat-log" class="flex-1 p-6 overflow-y-auto">
                <div class="flex bot-message mb-4">
                    <div class="p-4 rounded-lg max-w-lg shadow-sm">
                        <p>Hello! I'm the SereneMind AI Assistant. How can I support you today? You can ask me about our services, resources, or general mental health topics.</p>
                    </div>
                </div>
            </div>
             <!-- Chat Input -->
            <div class="p-4 border-t border-gray-200 bg-gray-50 rounded-b-xl flex-shrink-0">
                <form id="chat-form" class="flex items-center space-x-3">
                    <input type="text" id="user-input" placeholder="Type your message..." autocomplete="off" class="w-full px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 transition">
                    <button type="submit" class="bg-blue-500 text-white rounded-full p-3 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition transform hover:scale-105">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor"><path d="M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z"/></svg>
                    </button>
                </form>
            </div>
        </div>
        <!-- Toggle Button -->
        <button id="chat-toggle-button" class="bg-blue-600 text-white rounded-full w-16 h-16 flex items-center justify-center shadow-lg hover:bg-blue-700 transition transform hover:scale-110">
            <svg id="chat-icon-open" xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 10H6v-2h12v2zm-4 4H6v-2h8v2zm4-8H6V6h12v2z"/></svg>
        </button>
    </div>

    <!-- --- Counsellor Request Modal --- -->
    <div id="request-modal" class="fixed inset-0 bg-black bg-opacity-50 z-[101] hidden items-center justify-center p-4">
        <div class="modal-content bg-white rounded-lg shadow-xl w-full max-w-md">
            <!-- Modal Header -->
            <div class="flex justify-between items-center p-5 border-b">
                <h3 class="text-2xl font-semibold text-gray-800">Request a Counsellor</h3>
                <button id="close-modal-btn" class="text-gray-400 hover:text-gray-600">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
            <!-- Modal Body -->
            <div class="p-6">
                <form id="counsellor-form">
                    <div class="mb-4">
                        <label for="name" class="block text-gray-700 text-sm font-medium mb-2">Full Name</label>
                        <input type="text" id="name" name="name" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div class="mb-4">
                        <label for="email" class="block text-gray-700 text-sm font-medium mb-2">Email Address</label>
                        <input type="email" id="email" name="email" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div class="mb-6">
                        <label for="message" class="block text-gray-700 text-sm font-medium mb-2">Briefly describe what you're looking for</label>
                        <textarea id="message" name="message" rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                    </div>
                    <button type="submit" class="w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-blue-700 transition duration-300">Submit Request</button>
                </form>
                <div id="success-message" class="hidden text-center py-10">
                    <svg class="w-16 h-16 mx-auto text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <h4 class="text-2xl font-bold text-gray-800 mt-4">Request Sent!</h4>
                    <p class="text-gray-600 mt-2">Thank you for reaching out. A member of our team will contact you via email within 24 hours.</p>
                </div>
            </div>
        </div>
    </div>


    <script>
        // --- Website Functionality ---
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuButton.addEventListener('click', () => { mobileMenu.classList.toggle('hidden'); });
        mobileMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => { mobileMenu.classList.add('hidden'); });
        });
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const targetId = this.getAttribute('href');
                // Only process links with an actual ID, not just "#"
                if (targetId && targetId.length > 1) {
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        e.preventDefault();
                        targetElement.scrollIntoView({ behavior: 'smooth' });
                    }
                }
            });
        });
        const animatedElements = document.querySelectorAll('.animate-on-scroll');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in-element');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });
        animatedElements.forEach(el => { observer.observe(el); });

        // --- Chatbot Functionality ---
        const chatContainer = document.getElementById('chat-container');
        const chatToggleButton = document.getElementById('chat-toggle-button');
        const closeChatButton = document.getElementById('close-chat-button');
        chatToggleButton.addEventListener('click', () => {
            chatContainer.classList.toggle('active');
            setTimeout(() => document.getElementById('user-input').focus(), 100);
        });
        closeChatButton.addEventListener('click', () => { chatContainer.classList.remove('active'); });
        
        // --- Gemini API Logic ---
        const chatLog = document.getElementById('chat-log');
        const chatForm = document.getElementById('chat-form');
        const userInput = document.getElementById('user-input');
        const apiKey = "";
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
        const systemPrompt = `You are a friendly and empathetic AI assistant for SereneMind, a mental health support platform. Your goal is to provide supportive, helpful, and safe information. You are not a therapist, so you must not give medical advice. If a user seems to be in immediate crisis or expresses thoughts of self-harm, you MUST immediately provide the following helpline information and stop the conversation: 'It sounds like you are going through a difficult time. Please reach out for immediate help. You can connect with people who can support you by calling or texting 988 anytime in the US and Canada. In the UK, you can call 111.' For other topics, keep your answers concise, gentle, and easy to understand.`;

        function addMessage(sender, message) { /* ... (implementation unchanged) ... */ }
        function showLoading() { /* ... (implementation unchanged) ... */ }
        function hideLoading() { /* ... (implementation unchanged) ... */ }
        async function fetchWithBackoff(url, options, retries = 3, delay = 1000) { /* ... */ }
        async function getAIChatResponse(prompt) { /* ... (implementation unchanged) ... */ }
        chatForm.addEventListener('submit', async (e) => { /* ... (implementation unchanged) ... */ });


        // --- Counsellor Request Modal Functionality ---
        const requestModal = document.getElementById('request-modal');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const openModalBtns = [
            document.getElementById('get-started-btn-header'),
            document.getElementById('get-started-btn-mobile'),
            document.getElementById('find-therapist-btn')
        ];
        const counsellorForm = document.getElementById('counsellor-form');
        const successMessage = document.getElementById('success-message');

        const openModal = () => {
            requestModal.classList.remove('hidden');
            requestModal.classList.add('flex');
        };
        const closeModal = () => {
            requestModal.classList.add('hidden');
            requestModal.classList.remove('flex');
            // Reset form for next time
            counsellorForm.classList.remove('hidden');
            successMessage.classList.add('hidden');
            counsellorForm.reset();
        };

        openModalBtns.forEach(btn => btn.addEventListener('click', openModal));
        closeModalBtn.addEventListener('click', closeModal);
        requestModal.addEventListener('click', (e) => {
            if (e.target === requestModal) {
                closeModal();
            }
        });
        counsellorForm.addEventListener('submit', (e) => {
            e.preventDefault();
            counsellorForm.classList.add('hidden');
            successMessage.classList.remove('hidden');
            setTimeout(closeModal, 4000); // Close modal after 4 seconds
        });

        // --- Re-implementing unchanged JS functions to keep file self-contained ---
        function addMessage(sender, message) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('flex', 'mb-4', `${sender}-message`);
            const contentElement = document.createElement('div');
            contentElement.classList.add('p-4', 'rounded-lg', 'max-w-lg', 'shadow-sm');
            contentElement.innerHTML = message;
            messageElement.appendChild(contentElement);
            chatLog.appendChild(messageElement);
            chatLog.scrollTop = chatLog.scrollHeight;
        }

        function showLoading() {
            const loadingElement = document.createElement('div');
            loadingElement.id = 'loading-indicator';
            loadingElement.classList.add('flex', 'bot-message', 'mb-4');
            loadingElement.innerHTML = `<div class="p-4 rounded-lg max-w-lg shadow-sm bg-white border border-gray-200"><div class="loading-dots flex space-x-1.5"><span class="w-2 h-2 bg-gray-400 rounded-full"></span><span class="w-2 h-2 bg-gray-400 rounded-full"></span><span class="w-2 h-2 bg-gray-400 rounded-full"></span></div></div>`;
            chatLog.appendChild(loadingElement);
            chatLog.scrollTop = chatLog.scrollHeight;
        }

        function hideLoading() {
            const loadingIndicator = document.getElementById('loading-indicator');
            if (loadingIndicator) loadingIndicator.remove();
        }

        async function fetchWithBackoff(url, options, retries = 3, delay = 1000) {
            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (response.status === 429 || response.status >= 500) throw new Error(`Server error: ${response.status}`);
                    return response;
                } catch (error) {
                    if (i === retries - 1) throw error;
                    await new Promise(resolve => setTimeout(resolve, delay * Math.pow(2, i)));
                }
            }
        }

        async function getAIChatResponse(prompt) {
            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };
            try {
                const response = await fetchWithBackoff(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                if (!response.ok) throw new Error(`API request failed with status ${response.status}`);
                const result = await response.json();
                const candidate = result.candidates?.[0];
                if (candidate && candidate.content?.parts?.[0]?.text) {
                    let text = candidate.content.parts[0].text;
                    text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\*(.*?)\*/g, '<em>$1</em>').replace(/\n/g, '<br>');
                    return text;
                } else {
                    return "I'm sorry, I couldn't generate a response. Please try again.";
                }
            } catch (error) {
                console.error("Error fetching AI response:", error);
                return "I'm having a little trouble connecting right now. Please check your connection or try again in a moment.";
            }
        }

        chatForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const message = userInput.value.trim();
            if (message) {
                addMessage('user', message);
                userInput.value = '';
                userInput.disabled = true;
                showLoading();
                const aiResponse = await getAIChatResponse(message);
                hideLoading();
                addMessage('bot', aiResponse);
                userInput.disabled = false;
                userInput.focus();
            }
        });
    </script>
</body>
</html>


